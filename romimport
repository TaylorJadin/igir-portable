#!/usr/bin/env bash
# https://docs.romm.app/latest/Tools/Igir-Collection-Manager/#initial-setup-steps
# https://igir.io/usage/desktop/romm/

set -ou pipefail
cd "/mnt/user/games"

INPUT_DIR=/mnt/user/games/romimport
OUTPUT_DIR=/mnt/user/games/roms

# dats
# https://datomatic.no-intro.org/index.php?page=download&op=daily&s=64
# - Select P/C then Request
#
# http://redump.org/downloads/

# Documentation: https://igir.io/
# Uses dat files: https://datomatic.no-intro.org/index.php?page=download&op=daily
time /mnt/user/appdata/igir-portable/igir \
  move \
  zip \
  test \
  clean \
  report \
  -d dats/ \
  -i "${INPUT_DIR}/" \
  -i "${OUTPUT_DIR}/" \
  -o "${OUTPUT_DIR}/{romm}/" \
  --no-bios \
  --dat-threads 1
